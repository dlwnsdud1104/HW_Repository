{%extends 'base.html' %}

{% block css %} {% load static %}

<link rel="stylesheet" type="text/css" href="{% static 'detail.css' %}">
{% endblock %}

{% block box %}


<div class="box">
    <div class="title">
        <h3>할 일</h3>
        <p>{{ post.title }}</p>
    </div>
    <div class="content">
        <h3>내용</h3>
        <p>{{ post.content }}</p>
    </div>
    <div class="date">
        <h3> 마감 기한</h3>
        <p>{{ post.date }}</p>
    </div>
    <div class="author">
        <h4> 작성자 </h4>
        <p>{{ post.author }}</p>
    </div>
    <div class="option">
        <a href="{% url 'home' %}">홈으로</a>
        {% if user.is_authenticated and post.author.pk == user.pk %}
        <a href="{% url 'edit' post.pk %}">수정하기</a>
        <a href="{% url 'delete' post.pk %}">삭제하기</a>
        {% endif %}
    </div>

    <div class="commentbox">
        {% if user.is_authenticated %}
        <br>
        <form method="POST">
            {% csrf_token %}
            <input type="text" name="content" placeholder="댓글을 입력해주세요">
            <button type="submit">댓글 쓰기</button>
        </form>
        <br>
        {% endif %}

        <div class="commentdelete">
            {% for comment in post.comments.all %}
            <li>{{comment.author}} : {{ comment.content }}</li>
            {% if user.is_authenticated and comment.author.pk == user.pk %}
            <a href="{% url 'delete_comment' post.pk comment.pk %}">삭제</a>
            {% endif %}

            {% endfor %}
        </div>
    </div>
</div>

{% endblock %}

</html>